\documentclass[10pt,a4paper]{scrartcl}
\usepackage[T1]{fontenc}
\usepackage[paper=a4paper,left=20mm,right=20mm,top=18mm,bottom=25mm]{geometry}
\usepackage[utf8]{inputenc}
\usepackage{fancyhdr}
\usepackage[english]{babel}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amstext}
\usepackage{amsfonts}
\usepackage{bbm}
\usepackage{array}
\usepackage{listings}
\usepackage{color}
\usepackage{float}
\usepackage{epsfig}
\usepackage{tabularx}
\usepackage{ltxtable}
\usepackage{gauss}
\usepackage{minitoc}



\definecolor{colorComment}{rgb}{0.5,0.5, 0.5}
\definecolor{colorKeyword}{rgb}{0.2,0.2,0.5}
\definecolor{colorIdentifier}{rgb}{0,0,0}
\definecolor{colorString}{rgb}{0.1,0.5,0.2}
\definecolor{colorNumber}{gray}{0.5}

\lstset{basicstyle=\small\tt,
    keywordstyle=\color{colorKeyword},
    commentstyle=\itshape\color{colorComment},
    identifierstyle=\color{colorIdentifier},
    stringstyle=\color{colorString},
    numberstyle=\sf\tiny\color{colorNumber},
    numbers=left,
    breaklines=true,
    inputencoding=utf8,
    basewidth={0.5em,0.5em},
    showstringspaces=false,
    frame=tlRB}


\newcolumntype{L}[1]{>{\arraybackslash}p{#1}} 

\setlength{\parindent}{0pt}
\pagestyle{fancy}
%\fancyhead[L]{FACH}
%\fancyhead[C]{Aufgabenblatt Nr}
%\fancyhead[R]{Datum}
\fancyfoot[C]{\thepage}
%\fancyfoot[R]{Name}
\title{HDReplay}
\author{Joahnn Weging}


\setcounter{secttocdepth}{3}
\renewcommand{\stcfont}{\small}
\renewcommand{\stcSSfont}{\small}
\renewcommand{\stctitle}{\changefont{\familydefault}{m}{n} Chapter Overview}
%\renewcommand{\headrulewidth}{0.4pt} %obere Trennlinie
%\renewcommand{\footrulewidth}{0.4pt} %untere Trennlinie

% In den Dokumentenvorspann
\newcommand{\changefont}[3]{
\fontfamily{#1}\fontseries{#2}\fontshape{#3}\selectfont}




\begin{document}
\dosecttoc

\sf
\parindent0mm
\parskip2mm
\begin{small}

	\changefont{cmr}{m}{n}
\maketitle
\newpage
\tableofcontents
\newpage

\section{Motivation}

% TODO: Motivation @ Julian

\section{HDReplay}

HDReplay is a benchmark which is capable to replay a MPI-Program. It can't 
redo exactly the same computation as the original program but it can replay
every single MPI-Command. HDReplay uses the traces files generated by HDTrace.
   
\section{Operation breakdown}

\subsection{Brief explanation of the traces}

Every rank of the MPI-Program has it's own trace file. The name of the file 
looks like this.

\begin{lstlisting}
  <program name>_<hostname of the node>_<rank>_<thread>.trc
\end{lstlisting} 

The name of the trace file can be generated automatically out of the project 
file. When starting HDReplay each rank will read the traces file with the same
rank. This implies that you have to start HDReplay with the same count of ranks
like the original traced program. 

\subsection{Reading the project file}

First of the program reads the project file. The project file contains the
topology. At the moment HDReplay only reads the hostname the rank was executed
on to generate the name of the corresponding trace file. Further more the
project files contains the correlation of the ranks and the communicators. This
is needed for for the communicator-id used in the trace files to identify the 
communicator used with a collective call. 

\subsection{Reading the trace file}

Each trace file will be read by its rank / thread and stored into a list.
One element of the list contains the function name and the values of the 
parameters it takes. 

\subsection{Replay the trace file}

All MPI-functions are stored inside a hashtable. The key of the hashtable is the
name of the function and the value is a pointer to the function taking the
necessary parameters.\\
The replay function iterates over the list generated out of the trace file. In
each iteration the function takes the next MPI-function out of the

\section{Performance measuring}
  

\end{small}
\end{document}

% TODOLIST:
%
% -Motivation schreiben
% -traces files von partdiffpar 
% -implementation der n√∂tigen befehle in HDReplay
%

